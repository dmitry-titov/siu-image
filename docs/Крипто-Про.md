## Установка

0. Устанавливаем Java, если она не установлена в системе

1. Скачиваем или получаем иным способом нужную версию КриптоПРо 1.0.52 и выше [http://www.cryptopro.ru/](http://www.cryptopro.ru/)

2. Распаковываем архив

3. Переходим в папку lib внутри папки, в которую распаковался архив

4. Запускаем install.bat либо install.sh. формат команды запуска: 

        [скрипт-нисталлятор] [путь до jre] [ключ] [владелец лицензии]
        sh install.sh /opt/jdk-jcp/jre XXXXX-XXXXX-XXXXX-XXXXX-XXXXX "\"Название организации, на которую выдана лицензия\""

5. Установливаем ключи в хранилище с помощью панели управления Крипто-Про, которая находится в папке lib ControlPane.sh / ControlPane.bat

 * В Linux можно просто скопировть папку контейнера в `/var/CPROcsp/keys/${USER}` (в более новых версиях Крипто-ПРО `/var/opt/cprocsp/keys/codein/`)

 * В Windows - %папка_пользователя `\Local Settings\Application Data\Crypto Pro`

## Возникавшие проблемы

1. в Ubuntu несколько раз падала установка версии 1.0.52 из за того, что не хватало прав записи файлов в
 * папку с jre
 * `/var/tmp`
 * `/var/CPROcsp`
 
 Внятных сообщений об ошибке инсталлятор не выдает, выдает стек исключения с `IOException`. Кроме этого падал какой-то внутренний тест JCP, проверяющий корректность установки.

## Действия при истечении лицензии

1. деинсталлировать КриптоПРО и убедиться, что все файлы КриптоПРО удалились из JRE.

2. удалить `~/.java/.userPrefs/ru`

3. удалить `$jre/.systemPrefs/ru` (где $jre - папка, в которой находится jre)

4. установить Крипто-Про
